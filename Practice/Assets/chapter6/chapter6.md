#### Physics

- 유니티에 표준으로 속해 있는 물리 엔진
- 물리 엔진은 오브젝트를 물리 동작(낙하, 충돌 등)에 맞춰 움직임을 구현하는 시뮬레이션용 라이브러리
- 물리 엔진을 사용하면 오브젝트의 질량, 마찰 계수, 중력 등을 고려해 움직임을 계산하므로 사실적인 동작을 쉽게 구현 할 수 있다.
- Physics는 Rigidbody 컴포넌트와 Collider 컴포넌트로 구성
  - Rigidbody : 힘 계산(물체에 작용하는 중력이나 마찰 등의 힘 계산)을 담당
  - Collider : 물체의 충돌 판정을 담당
- 무대 위를 플레이어가 자유롭게 이동하는 액션 게임이나 복잡한 충돌 판정이 필요한 슈팅 게임에 이상적
- Physics를 사용하지 않는다고 해서 게임을 만들 수 없는 것은 아니다. 다만 Physics를 사용하면 게임을 간단히 만들 수 있다.

| 이름                | 모양                                                         |
| ------------------- | ------------------------------------------------------------ |
| Circle Collider 2D  | 원형 콜라이더                                                |
| Box Collider 2D     | 사각형 콜라이더                                              |
| Edge Collider 2D    | 선형 콜라이더, 오브젝트 일부를 충돌 판정할 때 사용한다.      |
| Polygon Collider 2D | 다각형 콜라이더, 오브젝트에 정확히 맞도록 충돌 판정할 때 사용한다. |

- Rigidbody 2D의 Body Type → Kinematic 을 선택하면 중력과 물리 연산의 영향을 무시한다.
- 이동하는 플레이어는 캡슐형 Collider를 사용하는 것이 좋다. 닿는 부분의 모양이 원형이므로 지면에 걸리는 상황도 줄일 수 있고 플레이어 이동도 매끄럽다.
- 콜라이더의 위치와 크기는 Inspector 창에서 변경할 수 있다.
- Rigidbody 2D → Constraints → Freeze Rotation 은  지정한 축의 회전을 방지하는 항목
- Gravity Scale : Rigidbody에 작용하는 중력 크기를 조절



- Physics를 사용한 충돌 판정 종류

  - Collision모드(충돌 모드) : 오브젝트가 닿았을 때 충돌 판정은 물론 충돌했을 때 주변에 미치는 영향까지 포함해 충돌 반응을 실행

  - Trigger모드(통과 모드) :  충돌 판정만 하고 충돌 응답은 실행하지 않음(충돌한 오브젝트는 빠져나감)

    | 상태             | Collision 모드     | Trigger 모드     |
    | ---------------- | ------------------ | ---------------- |
    | 충돌한 순간      | OnCollisionEnter2D | OnTriggerEnter2D |
    | 충돌 중          | OnCollisionStay2D  | OnTriggerStay2D  |
    | 충돌이 끝난 순간 | OnCollisionExit2D  | OnTriggerExit2D  |

    

------

#### Find 메서드

| 메서드                         | 설명                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| Find(오브젝트명)               | 씬 중에서 오브젝트명과 일치하는 게임 오브젝트를 한 개 찾아서 반환한다. |
| FindWithTag(태그명)            | 씬 중에서 태그명과 일치하는 게임 오브젝트를 한 개 찾아서 반환한다. |
| FindGameObjectsWithTag(태그명) | 씬 중에서 태그명과 일치                                      |
| FindObjectType(타입명)         | 씬 중에서 타입명과 일치하는 게임 오브젝트를  한 개 찾아서 반환한다. |
| FindObjectsOfType(타입명)      | 씬 중에서 타입명과 일치하는 게임 오브젝트를 여러 개 찾아서 반환한다. 반환 값은 Object 배열이다. |

------

#### 애니메이션

- 일반적으로 캐릭터 애니메이션을 만들 때는 플립북 방식을 사용
- 유니티 2D 게임에서도 플립북 방식과 유사한 방식을 사용, 움직임을 조금씩 변경한 스프라이트를 준비해 일정 간격으로 바꿔 주는 방식을 사용, 이를 '스프라이트 애니메이션' 이라 한다.
- Animator 컴포넌트 → speed : 애니메이션 재생 속도 변경

#### 메카님

- 애니메이션을 작성하고 실행할 때 유니티 에디터에서 일관되게 조작할 수 있는 기능
- 게임을 설계할 때 스프라이트 애니메이션을 작성해 각 애니메이션의 교체 시기를 지정 → 게임을 플레이 할 때 메카님이 오브젝트 상태를 판단하고 자동으로 애니메이션을 바꿔 재생
- 애니메이션 클립 : 스프라이트 애니메이션을 사용할 수 있도록 스프라이트를 정리한 파일
- 애니메이터 컨트롤러: 애니메이션 클립을 정리한 것

------

#### Pivot

- 유니티에서는 Pivot 좌표를 중심으로 회전,확대,축소
- Pivot은 보통 스프라이트 중심에 설정
- 문이나 플래퍼(flapper) 등은 힌지(경첩) 부분을 중심으로 회전시켜야 하므로 Pivot을 변경해야 한다.

------

#### 씬 전환

- ```c#
  using UnityEngine.SceneManagement;
  // LoadScene을 사용하기 위해서는 SceneManagement 패키지를 임포트 해야한다.
  ```

- LoadScene

  - 매개변수로 받은 씬 이름의 씬을 로드하는 메서드

------

#### 기기 사이의 속도 차 없애기

- 고성능 pc에서는 Update 메서드가 1초에 60번 호출되는 반면, 저성능 스마트폰에서는 Update메서느가 1초에 20번밖에 호출되지 않는다. 기기 사이의 속도 차이를 없애기 위해 이동 혹오세 Time.deltaTime을 곱하는 방법이 있다. 이 방법을 쓰면 어떤 기기에서든 1초 후에 처리하는 지점이 같다.

------

#### 스마트폰 조작에 대응

- 스마트폰의 기울기는 ***가속도 센서***로 구할 수 있다.
- 값은 x,y,z 축으로 나눌 수 있고, 스마트폰을 좌우로 기울이면 X축 값이 -1.0부터 1.0까지 범위로 변한다.

![image-20220719190810406](C:\Users\cmsj7\AppData\Roaming\Typora\typora-user-images\image-20220719190810406.png)

- ```c#
  Input.acceleration.x
  Input.acceleration.y
  Input.acceleration.z
  ```

  

------

#### 애니메이터(Animator)

- 노드 역할

  |  노드명   |                             역할                             |
  | :-------: | :----------------------------------------------------------: |
  |   Entry   |          애니메이션을 시작할 때는 Entry 노드로 전환          |
  | Any State | 현재 상태에 관계없이 특정 애니메이션으로 전환하고자 할 때 사용 |
  |   Exit    |       애니메이션을 종료하고자 할 때는 Exit 노드로 전환       |

- 트랜지션의 전환조건 매개변수

|     매개변수명      |                             설명                             |
| :-----------------: | :----------------------------------------------------------: |
|    Has Exit Time    | 애니메이션 재생이 종료되면 자동으로 다른 애니메이션으로 전환할지 여부를 선택 |
|      Exit Time      |   애니메이션의 종료 시간을 정규화 시간(0.0 ~ 1.0)으로 설정   |
| Transition Duration | 다음 애니메이션으로 전환하는 시간을 정규화 시간(0.0 ~ 1.0)으로 설정 |
|  Transition Offset  | 다음 애니메이션을 재생하는 시간을 정규화 시간(0.0 ~ 1.0)으로 설정 |

- Trigger(애니메이션의 전환 조건을 거는것)

| 데이터 형 |             설명              |
| :-------: | :---------------------------: |
|   Float   | 전환 조건에 부동소수점을 사용 |
|    Int    |          정수를 사용          |
|   Bool    |      true/false 를 사용       |
|  Trigger  |    트리거를 설치하는 경우     |

